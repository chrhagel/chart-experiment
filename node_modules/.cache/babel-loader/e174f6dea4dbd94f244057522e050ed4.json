{"ast":null,"code":"var _jsxFileName = \"/Users/christian/Dropbox/Code_courses/trying_react/chs-01/src/components/Barchart.js\";\nimport React from \"react\";\nimport { Stage, Layer, Rect, Line } from \"react-konva\";\nimport Konva from \"konva\";\nimport ColoredRect from \"./ColoredRect\";\n\nclass Barchart extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      bgcol: \"black\",\n      col: \"white\"\n    };\n\n    this.renderBackground = (theme, height, width, gutter) => {\n      if (theme === \"light\") return null;else {\n        return React.createElement(Rect, {\n          x: 0,\n          y: 0,\n          width: width + gutter,\n          height: height,\n          fill: this.state.bgcol,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 15\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.renderYAxisTickMarks = (gutter, height) => {\n      const numYMarks = 10;\n      const yAxisTickDistance = height / numYMarks + 1; // so we dont start at the x axis.\n\n      var arr = [];\n\n      for (var i = 0; i < numYMarks; i++) {\n        arr.push(React.createElement(Line, {\n          key: \"mark\" + i,\n          points: [gutter - 3, yAxisTickDistance * i, this.props.width + 3, yAxisTickDistance * i],\n          stroke: this.state.bgcol,\n          strokeWidth: 1,\n          tension: 1,\n          dash: [4],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25\n          },\n          __self: this\n        }));\n      }\n\n      return arr;\n    };\n  }\n\n  render() {\n    const data = this.props.data;\n    const theme = this.props.theme != null ? this.props.theme : \"light\";\n    const showMarks = !this.props.showMarks ? false : true;\n    const gutter = 10;\n    const width = this.props.width - gutter;\n    const height = this.props.height - gutter;\n\n    function maxHeightCalc() {\n      let h = 0;\n      Object.keys(data).map(key => {\n        if (data[key].value > h) {\n          h = data[key].value;\n        }\n      });\n      return h;\n    } // highest bar should fill up the barchart height. All bars should be scaled\n\n\n    const scale = height / maxHeightCalc(); // x posiiton of the bar\n\n    const xPos = width / Object.keys(data).length; // space between bars should be 1/2 the width of bars.\n    // 4 bars = 3 spaces. -> 4 + 4 + 3 = 11. Width /11 = each space. And a bar is twice that.\n\n    const barWidth = 2 * (width / (Object.keys(data).length * 2 + (Object.keys(data).length - 1)));\n    return React.createElement(Stage, {\n      width: this.props.width,\n      height: this.props.height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Layer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.renderBackground(theme, height, width, gutter), this.renderYAxisTickMarks(gutter, height), Object.keys(data).map((key, index) => React.createElement(ColoredRect, {\n      key: key,\n      xPos: xPos * index + gutter,\n      yPos: height - scale * data[key].value,\n      height: scale * data[key].value,\n      width: barWidth,\n      value: data[key].value,\n      chartHeight: height // used for labels\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    })), React.createElement(Line // horisontal x axis\n    , {\n      points: [gutter, height, this.props.width, height],\n      stroke: \"black\",\n      strokeWidth: 1,\n      tension: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(Line // vertical Y axis\n    // [x1, y1, x2, y2, x3, y3]\n    , {\n      points: [gutter, 0, gutter, height],\n      stroke: \"black\",\n      strokeWidth: 1,\n      tension: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Barchart;","map":{"version":3,"sources":["/Users/christian/Dropbox/Code_courses/trying_react/chs-01/src/components/Barchart.js"],"names":["React","Stage","Layer","Rect","Line","Konva","ColoredRect","Barchart","Component","state","bgcol","col","renderBackground","theme","height","width","gutter","renderYAxisTickMarks","numYMarks","yAxisTickDistance","arr","i","push","props","render","data","showMarks","maxHeightCalc","h","Object","keys","map","key","value","scale","xPos","length","barWidth","index"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Stage, Layer, Rect, Line } from \"react-konva\";\nimport Konva from \"konva\";\nimport ColoredRect from \"./ColoredRect\";\n\nclass Barchart extends React.Component {\n  state = {\n    bgcol: \"black\",\n    col: \"white\"\n\n  };\n  renderBackground = (theme, height, width, gutter) => {\n    if (theme === \"light\") return null;\n    else {\n      return <Rect x={0} y={0} width={width+gutter} height={height} fill={this.state.bgcol} />;\n    }\n  };\n\n  renderYAxisTickMarks = (gutter, height) => {\n    const numYMarks = 10;\n    const yAxisTickDistance = height / numYMarks + 1; // so we dont start at the x axis.\n    var arr = [];\n    for (var i = 0; i < numYMarks; i++) {\n      arr.push(\n        <Line\n          key={\"mark\" + i}\n          points={[\n            gutter - 3,\n            yAxisTickDistance * i,\n            this.props.width + 3,\n            yAxisTickDistance * i\n          ]}\n          stroke={this.state.bgcol}\n          strokeWidth={1}\n          tension={1}\n          dash={[4]}\n        />\n      );\n    }\n    return arr;\n  };\n\n  render() {\n    const data = this.props.data;\n\n    const theme = this.props.theme != null ? this.props.theme : \"light\";\n    const showMarks = !this.props.showMarks ? false : true;\n\n    const gutter = 10;\n    const width = this.props.width - gutter;\n    const height = this.props.height - gutter;\n\n    function maxHeightCalc() {\n      let h = 0;\n      Object.keys(data).map(key => {\n        if (data[key].value > h) {\n          h = data[key].value;\n        }\n      });\n      return h;\n    }\n\n    // highest bar should fill up the barchart height. All bars should be scaled\n    const scale = height / maxHeightCalc();\n    // x posiiton of the bar\n    const xPos = width / Object.keys(data).length;\n    // space between bars should be 1/2 the width of bars.\n    // 4 bars = 3 spaces. -> 4 + 4 + 3 = 11. Width /11 = each space. And a bar is twice that.\n    const barWidth =\n      2 *\n      (width / (Object.keys(data).length * 2 + (Object.keys(data).length - 1)));\n\n    return (\n      <Stage width={this.props.width} height={this.props.height}>\n        <Layer>\n          {this.renderBackground(theme, height, width, gutter)}\n\n          {this.renderYAxisTickMarks(gutter, height)}\n\n          {/* Bars */}\n          {Object.keys(data).map((key, index) => (\n            <ColoredRect\n              key={key}\n              xPos={xPos * index + gutter}\n              yPos={height - scale * data[key].value}\n              height={scale * data[key].value}\n              width={barWidth}\n              value={data[key].value}\n              chartHeight={height} // used for labels\n            />\n          ))}\n\n          <Line\n            // horisontal x axis\n            points={[gutter, height, this.props.width, height]}\n            stroke={\"black\"}\n            strokeWidth={1}\n            tension={1}\n          />\n\n          <Line\n            // vertical Y axis\n            // [x1, y1, x2, y2, x3, y3]\n            points={[gutter, 0, gutter, height]}\n            stroke={\"black\"}\n            strokeWidth={1}\n            tension={1}\n          />\n        </Layer>\n      </Stage>\n    );\n  }\n}\n\nexport default Barchart;\n"]},"metadata":{},"sourceType":"module"}